<div class="rounded-xl border border-white/10 bg-slate-950/40 p-3 mb-1">
  <div class="flex items-start justify-between gap-2">
    <div>
      <div class="text-sm font-semibold">{{ taskTitle(t) }}</div>
    </div>
  </div>
  <div class="mt-3 flex flex-wrap items-center justify-between gap-2">
    <select
      class="rounded-lg border border-white/10 bg-slate-950/60 text-slate-100 px-2 py-1 text-xs outline-none focus:border-indigo-400"
      (change)="assigneeChange.emit({ t, assigneeUserId: $any($event.target).value || null })"
    >
      <option
        class="bg-slate-950 text-slate-100"
        value=""
        [selected]="!t.assigneeUserId"
      >
        Unassigned
      </option>

      <option
        *ngIf="t.assigneeUserId && !hasUser(t.assigneeUserId)"
        class="bg-slate-950 text-slate-100"
        [value]="String(t.assigneeUserId)"
        [selected]="true"
      >
        Assigned user (not in list)
      </option>

      <option
        *ngFor="let u of users"
        class="bg-slate-950 text-slate-100"
        [value]="String(u.id)"
        [selected]="String(u.id) === String(t.assigneeUserId)"
      >
        {{ u.name }}
      </option>
    </select>
    <span
      class="shrink-0 rounded-md px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide border"
      [ngClass]="priorityBadgeClass(t.priority)"
      title="Priority"
    >
    {{ t.priority || 'None' }}
  </span>
  </div>
</div>
