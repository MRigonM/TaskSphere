<div
  class="rounded-xl border border-white/10 bg-slate-950/40 p-3 mb-2 cursor-pointer hover:bg-white/5 transition"
  (click)="open.emit(task)"
>
  <div class="flex items-start justify-between gap-3">
    <div class="min-w-0">
      <div class="text-sm font-semibold truncate">
        {{ task.title }}
      </div>
      <div class="text-xs mt-1">
        <span class="text-slate-500">Assignee:</span>
        <span class="ml-1 text-slate-300">
          {{ assigneeName(task.assigneeUserId ?? null) }}
        </span>
      </div>
    </div>
    <div class="flex items-center gap-2 shrink-0">
      <button
        type="button"
        class="rounded-lg px-2 py-1 text-xs text-slate-300 hover:text-white hover:bg-white/5 transition"
        (click)="$event.stopPropagation(); edit.emit(task)"
      >
        Edit
      </button>
      <button
        type="button"
        class="rounded-lg px-2 py-1 text-xs text-red-300 hover:text-red-200 hover:bg-red-500/10 transition"
        (click)="$event.stopPropagation(); remove.emit(task)"
      >
        Delete
      </button>
    </div>
  </div>
  <div class="mt-3 flex flex-wrap items-center justify-between gap-2">
    <div class="flex flex-wrap gap-2">
      <button
        *ngFor="let st of statuses"
        type="button"
        [disabled]="(task.status).toLowerCase() === (st ?? '').toLowerCase()"
        class="rounded-lg border px-2 py-1 text-xs transition disabled:opacity-60 disabled:cursor-not-allowed"
        [ngClass]="(task.status).toLowerCase() === (st ?? '').toLowerCase()
          ? 'border-indigo-400/70 bg-indigo-500/15 text-indigo-200'
          : 'border-white/10 bg-white/5 hover:bg-white/10 text-slate-200'"
        (click)="$event.stopPropagation(); setStatus.emit({ task, status: st })"
      >
        {{ st }}
      </button>
    </div>
    <button
      *ngIf="moveLabel"
      type="button"
      class="rounded-lg border border-white/10 bg-white/5 px-3 py-1.5 text-xs hover:bg-white/10 transition disabled:opacity-50 disabled:cursor-not-allowed"
      [disabled]="moveDisabled"
      (click)="$event.stopPropagation(); move.emit(task)"
    >
      {{ moveLabel }}
    </button>
  </div>
</div>
